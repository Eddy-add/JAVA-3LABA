# Лабораторная работа № 2
## Задание 1
### Задача 4: Время
*Текст задачи: Создайте сущность Время, которое будет описывать текущее время суток в 24-х часовом
формате. Время описывается числом секунд, прошедшим с начала суток. Время может быть
приведено к текстовой форме следующего формата: “ЧЧ:ММ:СС”. Например,если время задано как
12000, то текстовая форма будет “3:20:00”. Если общее время превышает 24 часа, то отображаться
в текстовом виде должно только то время, которое прошло с начала последних суток, например
91800, это не 25:30:00, а 1:30:00.
Необходимо создать и вывести на экран текстовую форму для следующих вариантов времени:
10 секунд
10000 секунд
100000 секунд*

**Алгоритм решения:**

1. Инициализация объекта:
Принять целое число секунд на вход
Вычислить остаток от деления на 86400 (секунды в сутках)
Использовать Math.floorMod() для корректной обработки отрицательных чисел
Сохранить результат в поле seconds
2. Вычисление часов:
Разделить seconds на 3600 (целочисленное деление)
Результат - количество полных часов
3. Вычисление минут:
Взять остаток от деления seconds на 3600
Разделить результат на 60 (целочисленное деление)
Результат - количество полных минут
4. Вычисление секунд:
Взять остаток от деления seconds на 60
Результат - количество оставшихся секунд
5. Форматирование строки:
Использовать String.format() с шаблоном "%d:%02d:%02d"
Часы выводятся без ведущих нулей
Минуты и секунды выводятся с ведущим нулем при необходимости
**Код реализации:**

````
package ru.university.lab2;

public class Time {

  private final int seconds;

  public Time(int seconds) {
    this.seconds = Math.floorMod(seconds, 24 * 3600);
  }

  private int getHours() {
    return seconds / 3600;
  }

  private int getMinutes() {
    return (seconds % 3600) / 60;
  }

  private int getSeconds() {
    return seconds % 60;
  }

  @Override
  public String toString() {
    return String.format("%d:%02d:%02d", getHours(), getMinutes(), getSeconds());
  }
}

````

**Пример работы:**
````
=== ЗАДАНИЕ 1.4 - ВРЕМЯ ===
Стандартные примеры:
10 секунд: 0:00:10
10000 секунд: 2:46:40
100000 секунд: 3:46:40

--- ВВОД ПОЛЬЗОВАТЕЛЯ ---
Введите количество секунд: 312
Ваше время: 0:05:12
````
------------------------------------------------------------
## Задание 2
### Задача 5: Дом
*Текст задачи: Создайте сущность Дом, которая описывается количеством этажей в виде числа. У Дома можно
запросить текстовую форму, которое имеет представление вида “дом с N этажами”, где N это
число. Гарантировать правильное окончание фразы, в зависимости от количества этажей. Создать
и вывести на экран дома с 1, 5, 23 этажами.*

**Алгоритм решения:**

1. Инициализация объекта:
Принять целое число этажей на вход
Если значение отрицательное, установить floors = 0 (использовать Math.max(0, floors))
Сохранить результат в поле floors
2. Определение правильного падежа слова "этаж":
Взять абсолютное значение floors (для работы с отрицательными числами)
Определить последнюю цифру: last = n % 10
Определить последние две цифры: lastTwo = n % 100
Применить правила русского языка:
Если last == 1 И lastTwo != 11 → использовать "этажом"
Если (last >= 2 И last <= 4) И (lastTwo < 10 ИЛИ lastTwo >= 20) → использовать "этажами"
Во всех остальных случаях → использовать "этажами"
3. Формирование строки:
Создать строку по шаблону: "дом с " + floors + " " + getFloorWord()
**Код реализации:**

````
package ru.university.lab2;

public class House {

  private int floors;

  public House(int floors) {
    this.floors = Math.max(0, floors);
  }


  public int getFloors() {
    return floors;
  }

  public void setFloors(int floors) {
    this.floors = Math.max(0, floors);
  }

  private String getFloorWord() {
    int n = Math.abs(floors);
    int lastTwo = n % 100;
    int last = n % 10;

    if (floors % 10 == 1 && floors % 100 != 11) {
      return "этажом";
    } else if ((floors % 10 >= 2 && floors % 10 <= 4) && (floors % 100 < 10
        || floors % 100 >= 20)) {
      return "этажами";
    } else {
      return "этажами";
    }
  }

  @Override
  public String toString() {
    return "дом с " + floors + " " + getFloorWord();
  }
}


````

**Пример работы:**
````
=== ЗАДАНИЕ 1.5 - ДОМ ===
Стандартные примеры:
дом с 1 этажом
дом с 5 этажами
дом с 23 этажами

--- ВВОД ПОЛЬЗОВАТЕЛЯ ---
Введите количество этажей для дома: 21
Созданный дом: дом с 21 этажом

Хотите изменить количество этажей? (да/нет): нет
````
------------------------------------------------------------
## Задание 3
### Задача 4: Сотрудники и отделы.
*Текст задачи: Создайте сущность Сотрудник, которая описывается именем (в строковой форме) и отделом, в
котором сотрудник работает, причем у каждого отдела есть название и начальник, который
также является Сотрудником. Сотрудник может быть приведен к текстовой форме вида: “Имя
работает в отделе Название, начальник которого Имя”. В случае если сотрудник является
руководителем отдела, то текстовая форма должна быть “Имя начальник отдела Название”.
Необходимо выполнить следующие задачи:
1. Создать Сотрудников Петрова, Козлова, Сидорова работающих в отделе IT.
2. Сделать Козлова начальником IT отдела.
3. Вывести на экран текстовое представление всех трех Сотрудников (у всех троих должен
оказаться один и тот же отдел и начальник).*

**Алгоритм решения:**

1. Инициализация объекта:
Принять имя и отдел (Department) на вход
Проверить отдел на null, иначе выбросить IllegalArgumentException
Отформатировать имя с помощью formatEmployeeName()
Сохранить имя и отдел в поля класса
Добавить сотрудника в отдел через department.addEmployee(this)
2. Форматирование имени сотрудника:
Если имя null, вернуть "Неизвестный"
Убрать лишние пробелы с помощью trim()
Если строка пустая после трима, вернуть "Неизвестный"
Преобразовать: первая буква заглавная, остальные строчные
3. Определение строкового представления (toString):
Получить начальника отдела через department.getBoss()
Проверить три случая:
Если начальник не назначен (boss == null):
→ вернуть: "имя работает в отделе название_отдела, начальник не назначен"
Если этот сотрудник является начальником (this == boss):
→ вернуть: "имя начальник отдела название_отдела"
Во всех остальных случаях:
→ вернуть: "имя работает в отделе название_отдела, начальник которого имя_начальника"
4. Особенности алгоритма:
Класс иммутабельный (поля final)
Автоматическая регистрация сотрудника в отделе при создании
Корректная обработка пограничных случаев с именем
Динамическое определение роли сотрудника при выводе информации
**Код реализации:**

````
package ru.university.lab2;

public class Employee {

  private final String name;
  private final Department department;

  public Employee(String name, Department department) {
    if (department == null) {
      throw new IllegalArgumentException("Отдел не может быть пустым");
    }
    this.name = formatEmployeeName(name);
    this.department = department;
    department.addEmployee(this);
  }

  private String formatEmployeeName(String name) {
    if (name == null) {
      return "Неизвестный";
    }
    String trimmed = name.trim();
    if (trimmed.isEmpty()) {
      return "Неизвестный";
    }
    return trimmed.substring(0, 1).toUpperCase() + trimmed.substring(1).toLowerCase();
  }

  public String getName() {
    return name;
  }

  public Department getDepartment() {
    return department;
  }

  @Override
  public String toString() {
    Employee boss = department.getBoss();
    if (boss == null) {
      return name + " работает в отделе " + department.getName() + ", начальник не назначен";
    }
    if (this == boss) {
      return name + " начальник отдела " + department.getName();
    }
    return name + " работает в отделе " + department.getName() +
        ", начальник которого " + boss.getName();
  }
}

````

**Пример работы:**
````
=== ЗАДАНИЕ 2.4 - СОТРУДНИКИ И ОТДЕЛЫ ===
Введите название отдела: IT
Введите количество сотрудников в отделе: 3
Введите имя сотрудника 1: Петров
Введите имя сотрудника 2: Козлов
Введите имя сотрудника 3: Сидоров

Доступные сотрудники:
  - Петров
  - Козлов
  - Сидоров
Введите имя начальника отдела: Козлов
Начальник назначен: Козлов

Информация о сотрудниках:
Петров работает в отделе IT, начальник которого Козлов
Козлов начальник отдела IT
Сидоров работает в отделе IT, начальник которого Козлов
````
------------------------------------------------------------
## Задание 3
### Задача 4: Сотрудники и отделы.
*Текст задачи: Измените решение, полученное в задаче 2.4 таким образом, чтобы имея ссылку на сотрудника,
можно было бы узнать список всех сотрудников этого отдела.*

**Алгоритм решения:**

1. Инициализация объекта:
Принять название отдела на вход
Отформатировать название через formatDepartmentName()
Сохранить отформатированное название в поле name
Инициализировать пустой список сотрудников (ArrayList<Employee>)
Установить начальника в null по умолчанию
2. Форматирование названия отдела:
Если название null или пустая строка после trim(), вернуть "Без названия"
Иначе: обрезать пробелы и преобразовать в верхний регистр (toUpperCase())
3. Установка начальника (setBoss):
Проверить, что начальник не null, иначе выбросить IllegalArgumentException
Проверить, что начальник работает в этом отделе (boss.getDepartment() == this)
Если проверки пройдены, установить начальника
4. Добавление сотрудника (addEmployee):
Если сотрудник null, ничего не делать (возврат)
Проверить, что сотрудника еще нет в списке (!employees.contains(employee))
Если нет, добавить в список
5. Получение списка сотрудников:
Вернуть неизменяемую копию списка через Collections.unmodifiableList()
6. Важные особенности:
Название отдела неизменяемое (поле final)
Список сотрудников защищен от внешнего изменения
Контроль целостности данных при назначении начальника
Исключение дублирования сотрудников в списке
**Код реализации:**

````
package ru.university.lab2;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Department {

  private final String name;
  private Employee boss;
  private final List<Employee> employees;

  public Department(String name) {
    this.name = formatDepartmentName(name);
    this.employees = new ArrayList<>();
  }

  private String formatDepartmentName(String name) {
    if (name == null || name.trim().isEmpty()) {
      return "Без названия";
    }
    return name.trim().toUpperCase();
  }

  public String getName() {
    return name;
  }

  public Employee getBoss() {
    return boss;
  }

  public void setBoss(Employee boss) {
    if (boss == null) {
      throw new IllegalArgumentException("Начальник не может быть null");
    }
    if (boss.getDepartment() != this) {
      throw new IllegalArgumentException("Начальник должен быть сотрудником этого отдела");
    }
    this.boss = boss;
  }

  public void addEmployee(Employee employee) {
    if (employee == null) {
      return;
    }
    if (!employees.contains(employee)) {
      employees.add(employee);
    }
  }

  public List<Employee> getEmployees() {
    return Collections.unmodifiableList(employees);
  }
}


````

**Пример работы:**
````
=== ЗАДАНИЕ 3.4 - РАСШИРЕННЫЕ СОТРУДНИКИ ===
Введите сотрудников отдела IT.
Чтобы закончить ввод — напишите: стоп
Имя сотрудника: Машанов
Добавлен: Машанов
Имя сотрудника: Сидоров
Добавлен: Сидоров
Имя сотрудника: Ушаков
Добавлен: Ушаков
Имя сотрудника: Папаницев
Добавлен: Папаницев
Имя сотрудника: стоп

Список сотрудников отдела IT:
  - Машанов
  - Сидоров
  - Ушаков
  - Папаницев

Хотите назначить начальника? (да/нет): да
Введите имя начальника (как в списке): Сидоров
Начальник отдела назначен: Сидоров

Начальник отдела: Сидоров
````
------------------------------------------------------------
## Задание 4
### Задача 3: Создаем Дом.
*Текст задачи: Измените сущность Дом из задачи 1.5. Новые требования включают:
 Создание дома может осуществляться только путем указания количества этажей.
 После создания дому нельзя изменить количество этажей.
Создайте и выведите на экран дома с 2, 35, 91 этажами. Продемонстрируйте на примере что дому
нельзя заменить количество этажей.*

**Алгоритм решения:**

1. Создание объекта ImmutableHouse:
Принимаем количество этажей.
Если количество этажей меньше 0, устанавливаем его в 0.
2. Получение количества этажей:
Метод getFloors() возвращает количество этажей.
3. Получение правильной формы слова "этаж":
Метод getFloorWord():
Если этажей 1 (кроме 11), возвращает "этажом".
В других случаях — "этажами".
4. Представление объекта как строки:
Метод toString() возвращает строку вида: "неизменяемый дом с N этажами/этажом".
**Код реализации:**

````
package ru.university.lab2;

public class ImmutableHouse {

  private final int floors;

  public ImmutableHouse(int floors) {
    this.floors = Math.max(0, floors);
  }

  public int getFloors() {
    return floors;
  }

  private String getFloorWord() {
    if (floors % 10 == 1 && floors % 100 != 11) {
      return "этажом";
    } else {
      return "этажами";
    }
  }

  @Override
  public String toString() {
    return "неизменяемый дом с " + floors + " " + getFloorWord();
  }
}


````

**Пример работы:**
````
=== ЗАДАНИЕ 4.3 - НЕИЗМЕНЯЕМЫЙ ДОМ ===
Стандартные примеры:
неизменяемый дом с 2 этажами
неизменяемый дом с 35 этажами
неизменяемый дом с 91 этажом

--- ВВОД ПОЛЬЗОВАТЕЛЯ ---
Введите количество этажей для неизменяемого дома: 4
Созданный неизменяемый дом: неизменяемый дом с 4 этажами

Демонстрация неизменяемости:
Новый дом: неизменяемый дом с 14 этажами
Старый дом остался неизменным: неизменяемый дом с 4 этажами
````
------------------------------------------------------------
## Задание 5
### Задача 1: Пистолет стреляет.
*Текст задачи: Создайте сущность Пистолет, которая описывается следующим образом:
Имеет Количество патронов (целое число)
Может быть создан с указанием начального количества патронов
Может быть создан без указания начального количества патронов, в этом случае он
изначально заряжен пятью патронами.
Может Стрелять, что приводит к выводу на экран текста “Бах!” в том случае, если
количество патронов больше нуля, иначе делает “Клац!”. После каждого выстрела (когда
вывелся “Бах!”) количество патронов уменьшается на один.
Создайте пистолет с тремя патронами и выстрелите из него пять раз.*

**Алгоритм решения:**

1. Создание объекта Gun:
Принимаем количество патронов. Если оно меньше 0, устанавливаем 0.
По умолчанию, если количество патронов не указано, устанавливается 5 патронов.
2. Получение количества патронов:
Метод getBullets() возвращает текущее количество патронов.
3. Выстрел из пистолета:
Метод shoot():
Если патроны есть (больше 0), выстреливает (выводит "Бах!") и уменьшает количество патронов на 1.
Если патроны закончились, выводит "Клац!" (выстрела нет).
4. Представление объекта как строки:
Метод toString() возвращает строку вида: "Пистолет с N патронами", где N — количество патронов.
**Код реализации:**

````
package ru.university.lab2;

public class Gun {

  private int bullets;

  public Gun(int bullets) {
    this.bullets = Math.max(0, bullets);
  }

  public Gun() {
    this(5);
  }

  public int getBullets() {
    return bullets;
  }

  public void shoot() {
    if (bullets > 0) {
      System.out.println("Бах!");
      bullets--;
    } else {
      System.out.println("Клац!");
    }
  }

  @Override
  public String toString() {
    return "Пистолет с " + bullets + " патронами";
  }
}



````

**Пример работы:**
````
=== ЗАДАНИЕ 5.1 - ПИСТОЛЕТ ===
Выберите тип создания пистолета:
1 - С указанием количества патронов
2 - С патронами по умолчанию (5)
Ваш выбор (1-2): 1
Введите количество патронов: 3
Создан: Пистолет с 3 патронами

Сколько раз вы хотите выстрелить? 5
Стреляем 5 раз:
Выстрел 1: Бах!
Выстрел 2: Бах!
Выстрел 3: Бах!
Выстрел 4: Клац!
Выстрел 5: Клац!
После стрельбы: Пистолет с 0 патронами
````
------------------------------------------------------------
